@model PatientManagementSystem.ViewModels.PatientViewModel

@{
    ViewData["Title"] = "Edit Patient";
    ViewData["HideFooter"] = true;
}

<div>
    <h2 class="text-3xl font-bold text-stromboli mb-6">Edit Patient</h2>

    <form asp-action="Edit" method="post">
        <div class="container mx-auto px-4 py-6">
            <!-- Patient Primary Details Section -->
            <input type="hidden" asp-for="Id" />

            <div class="mb-8">
                <h3 class="text-2xl font-semibold text-gray-800 mb-4">Patient Primary Details</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- First Name -->
                    <div class="form-group">
                        <label asp-for="FirstName" class="control-label block text-sm font-medium text-gray-700">First Name</label>
                        <input asp-for="FirstName" class="form-control mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" required />
                        <span asp-validation-for="FirstName" class="text-danger"></span>
                    </div>

                    <!-- Last Name -->
                    <div class="form-group">
                        <label asp-for="LastName" class="control-label block text-sm font-medium text-gray-700">Last Name</label>
                        <input asp-for="LastName" class="form-control mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" />
                        <span asp-validation-for="LastName" class="text-danger"></span>
                    </div>

                    <!-- Middle Name -->
                    <div class="form-group">
                        <label asp-for="MiddleName" class="control-label block text-sm font-medium text-gray-700">Middle Name</label>
                        <input asp-for="MiddleName" class="form-control mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" />
                        <span asp-validation-for="MiddleName" class="text-danger"></span>
                    </div>

                    <!-- Date of Birth -->
                    <div class="form-group">
                        <label asp-for="DateOfBirth" class="control-label block text-sm font-medium text-gray-700">Date of Birth</label>
                        <input asp-for="DateOfBirth" class="form-control mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" type="date" required />
                        <span asp-validation-for="DateOfBirth" class="text-danger"></span>
                    </div>

                    <!-- Age -->
                    <div class="form-group">
                        <label asp-for="Age" class="control-label block text-sm font-medium text-gray-700">Age</label>
                        <input asp-for="Age" class="form-control mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" />
                        <span asp-validation-for="Age" class="text-danger"></span>
                    </div>

                    <!-- Gender -->
                    <div class="form-group">
                        <label asp-for="Gender" class="control-label block text-sm font-medium text-gray-700">Gender</label>
                        <select asp-for="Gender"
                                class="form-control mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"
                                asp-items="Html.GetEnumSelectList<PatientManagementSystem.Models.Gender>()"
                                required>
                            <option value="">-- Select Gender --</option>
                        </select>
                        <span asp-validation-for="Gender" class="text-danger"></span>
                    </div>

                    <!-- Address -->
                    <div class="form-group">
                        <label asp-for="Address" class="control-label block text-sm font-medium text-gray-700">Address</label>
                        <input asp-for="Address" class="form-control mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" />
                        <span asp-validation-for="Address" class="text-danger"></span>
                    </div>

                    <!-- Contact Number -->
                    <div class="form-group">
                        <label asp-for="ContactNumber" class="control-label block text-sm font-medium text-gray-700">Contact Number</label>
                        <input asp-for="ContactNumber" class="form-control mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" />
                        <span asp-validation-for="ContactNumber" class="text-danger"></span>
                    </div>

                    <!--Email-->

                    <!-- Occupation -->
                    <div class="form-group">
                        <label asp-for="Occupation" class="control-label block text-sm font-medium text-gray-700">Occupation</label>
                        <input asp-for="Occupation" class="form-control mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" />
                        <span asp-validation-for="Occupation" class="text-danger"></span>
                    </div>

                    <!-- Employer -->
                    <div class="form-group">
                        <label asp-for="Employer" class="control-label block text-sm font-medium text-gray-700">Employer</label>
                        <input asp-for="Employer" class="form-control mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" />
                        <span asp-validation-for="Employer" class="text-danger"></span>
                    </div>

                    <!-- Marital Status -->
                    <div class="form-group">
                        <label asp-for="MaritalStatus" class="control-label block text-sm font-medium text-gray-700">Marital Status</label>
                        <select asp-for="MaritalStatus"
                                class="form-control mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"
                                asp-items="Html.GetEnumSelectList<PatientManagementSystem.Models.MaritalStatus>()"
                                required>
                            <option value="">-- Select Marital Status --</option>
                        </select>
                        <span asp-validation-for="MaritalStatus" class="text-danger"></span>
                    </div>

                    <!-- Spouse Name (Initially Hidden) -->
                    <div class="form-group col-span-2" id="spouse-name-container" style="display:none;">
                        <label asp-for="SpouseName" class="control-label block text-sm font-medium text-gray-700">Spouse Name</label>
                        <input asp-for="SpouseName" class="form-control mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" />
                        <span asp-validation-for="SpouseName" class="text-danger"></span>
                    </div>
                </div>
            </div>

            <!-- Health Related Details Section -->
            <div class="mb-8">
                <h3 class="text-2xl font-semibold text-gray-800 mb-4">Patient's Health Related Details</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Weight -->
                    <div class="form-group">
                        <label asp-for="Weight" class="control-label block text-sm font-medium text-gray-700">Weight (kg)</label>
                        <input asp-for="Weight" class="form-control mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"
                               placeholder="Enter weight in kg"
                               type="number"
                               min="1" max="500" required />
                        <span asp-validation-for="Weight" class="text-danger"></span>
                    </div>

                    <!-- Height -->
                    <div class="form-group">
                        <label asp-for="Height" class="control-label block text-sm font-medium text-gray-700">Height (cm)</label>
                        <input asp-for="Height" class="form-control mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"
                               placeholder="Enter height in cm"
                               type="number"
                               min="1" max="300" required />
                        <span asp-validation-for="Height" class="text-danger"></span>
                    </div>

                    <!-- Blood Pressure -->
                    <div class="form-group">
                        <label asp-for="BloodPressure" class="control-label block text-sm font-medium text-gray-700">Blood Pressure</label>
                        <input asp-for="BloodPressure" class="form-control mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" />
                        <span asp-validation-for="BloodPressure" class="text-danger"></span>
                    </div>

                    <!-- Past Medical History -->
                    <div class="form-group">
                        <label asp-for="PastMedicalHistory" class="control-label block text-sm font-medium text-gray-700">Past Medical History</label>
                        <input asp-for="PastMedicalHistory" class="form-control mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" />
                        <span asp-validation-for="PastMedicalHistory" class="text-danger"></span>
                    </div>

                    <!-- Family History -->
                    <div class="form-group">
                        <label asp-for="FamilyHistory" class="control-label block text-sm font-medium text-gray-700">Family History</label>
                        <input asp-for="FamilyHistory" class="form-control mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" />
                        <span asp-validation-for="FamilyHistory" class="text-danger"></span>
                    </div>
                </div>

                <!-- Emergency Contact Section -->
                <div class="mb-8">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4">Patient's Emergency Contact</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Emergency Person -->
                        <div class="form-group">
                            <label asp-for="EmergencyPerson" class="control-label block text-sm font-medium text-gray-700">Emergency Contact</label>
                            <input asp-for="EmergencyPerson" class="form-control mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" />
                            <span asp-validation-for="EmergencyPerson" class="text-danger"></span>
                        </div>

                        <!-- Emergency Relationship -->
                        <div class="form-group">
                            <label asp-for="EmergencyRelationship" class="control-label block text-sm font-medium text-gray-700">Relationship</label>
                            <input asp-for="EmergencyRelationship" class="form-control mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" />
                            <span asp-validation-for="EmergencyRelationship" class="text-danger"></span>
                        </div>

                        <!-- Emergency Contact Number -->
                        <div class="form-group">
                            <label asp-for="EmergencyContact" class="control-label block text-sm font-medium text-gray-700">Contact Number</label>
                            <input asp-for="EmergencyContact" class="form-control mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" />
                            <span asp-validation-for="EmergencyContact" class="text-danger"></span>
                        </div>
                    </div>
                </div>

                    <!-- Insurance Details Section -->
                    <div class="mb-8">
                        <h3 class="text-2xl font-semibold text-gray-800 mb-4">Patient's Insurance Details (Optional)</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Insurance Details -->
                            <div class="form-group col-span-2">
                                <label asp-for="InsuranceDetails" class="control-label block text-sm font-medium text-gray-700">Insurance Details</label>
                                <textarea asp-for="InsuranceDetails" class="form-control mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"></textarea>
                                <span asp-validation-for="InsuranceDetails" class="text-danger"></span>
                            </div>

                            <!-- Primary Care Provider -->
                            <div class="form-group">
                                <label asp-for="PrimaryCareProvider" class="control-label block text-sm font-medium text-gray-700">Primary Care Provider</label>
                                <input asp-for="PrimaryCareProvider" class="form-control mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" />
                                <span asp-validation-for="PrimaryCareProvider" class="text-danger"></span>
                            </div>
                        </div>
                    </div>

                <!-- Minor Patient Section -->
                <div class="mb-8">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4">For Minor or Under 18 Patients</h3>
                    <p>If the patient is a minor(under the age of 18), please provide the information for the parent or legal guardian</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Parent Guardian Name -->
                        <div class="form-group">
                            <label asp-for="ParentGuardianName" class="control-label block text-sm font-medium text-gray-700">Parent or Guardian</label>
                            <input asp-for="ParentGuardianName" class="form-control mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" />
                            <span asp-validation-for="ParentGuardianName" class="text-danger"></span>
                        </div>

                        <!-- Parent Guardian Contact -->
                        <div class="form-group">
                            <label asp-for="ParentGuardianContact" class="control-label block text-sm font-medium text-gray-700">Contact Number</label>
                            <input asp-for="ParentGuardianContact" class="form-control mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" />
                            <span asp-validation-for="ParentGuardianContact" class="text-danger"></span>
                        </div>
                    </div>
                    </div>

            </div>

            <!-- Submit Button -->
            <button type="submit" class="bg-stromboli text-white font-semibold py-2 px-4 rounded-md hover:bg-stromboli mt-4">
                Save Changes
            </button>
            <a href="@Url.Action("Index", "Patient")" class="btn btn-secondary">Cancel</a>

        </div>
    </form>
</div>


<script>
    document.addEventListener('DOMContentLoaded', function () {
        const maritalStatusSelect = document.querySelector('select[name="MaritalStatus"]');
        const spouseNameContainer = document.getElementById('spouse-name-container');

        // Show the spouse name input field if marital status is 'Married'
        maritalStatusSelect.addEventListener('change', function () {
            if (this.value == '1') {  // Assuming '1' is the 'Married' option in the enum
                spouseNameContainer.style.display = 'block';
            } else {
                spouseNameContainer.style.display = 'none';
            }
        });
    });
</script>
